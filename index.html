<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Document</title>
</head>
<body>
        <header class="site-header">
                <div class="innerwrap">
                  <div class="logo">JC Cheney</div>
                  <nav><span class="nav-link"><a href="index.html">About</a></span>
                  <span>&#124;</span>
                  <span class="nav-link"><a href="portfolio.html">Portfolio</a></span>
                  <span>&#124;</span>
                  <span class="nav-link"><a href="contact.html">Contact</a></span>
                    </div>
                  </nav>
              </header>
            
              <div class="container">
            
                <section class="main-content">
            
                  <h1>Totally 90's Country Trivia</h1>
                  
                  <hr>
                  <div id="start-button"></div>
                  <div id="time-left"></div>
                  <h2 id="question"></h2>
                  <div id="choices">
                  </div>
                  <div class="explanation">
                    <h2 id="announcement"></h2>
                    <p id="user-choice"></p>
                    <img id="correct-gif">
                    <p id="correct-explanation"></p>
                  </div>
                  <div class="game-over">
                    <h2 id="results"></h2>
                    <div id="wins"></div>
                    <div id="losses"></div>
                    </div>
            
                </section>
            
              </div>
            
    
        <script src="https://code.jquery.com/jquery-3.4.0.min.js">
    </script>
    <script>
    var questionsArr = [{
        q: "Who release a song called Hillbilly shoes?",
        choices: ["Alan Jackson", "Reba McEntire", "Montgomery Gentry", "Kenny Chesney"],
        answer: 3,
        gifURL: "https://media.giphy.com/media/3o6Mbqr2KXXVlEfZg4/giphy.gif",
        answerBody: "Montgomery Gentry released a song called Hillbilly Shoes. The song was on their album called Tattoos & Scars, that was released in 1999. The song peaked at number 13 on the US Billboard Hot Country Songs chart."},
        {
        q: "Question 2",
        choices: ["2: Option 1", "2: Option 2", "2: Option 3", "2: Option 4"],
        answer: 2,
        gifURL: "https://media.giphy.com/media/3o6Mbqr2KXXVlEfZg4/giphy.gif",
        answerBody: "Landjaeger beef rump, flank sausage turkey salami jerky burgdoggen biltong tail shankle. Pork cupim flank turducken jerky boudin short loin beef ribs pancetta jowl sirloin andouille. Beef ribs ground round porchetta ham brisket corned beef. Turducken rump kielbasa sausage porchetta, fatback ham pork chop strip steak meatloaf ham hock jerky meatball shankle tongue."},
        {
        q: "Question 3",
        choices: ["3: Option 1", "3: Option 2", "3: Option 3", "3: Option 4"],
        answer: 1,
        gifURL: "https://media.giphy.com/media/3o6Mbqr2KXXVlEfZg4/giphy.gif",
        answerBody: "Does your lorem ipsum text long for something a little meatier? Give our generator a try… it’s tasty!"},
        {
        q: "Question 4",
        choices: ["4: Option 1", "4: Option 2", "4: Option 3", "4: Option 4"],
        answer: 4,
        gifURL: "https://media.giphy.com/media/3o6Mbqr2KXXVlEfZg4/giphy.gif",
        answerBody: "Does your lorem ipsum text long for something a little meatier? Give our generator a try… it’s tasty!"}];

      var userChoice;
      var questionNum = 0
      var wins = 0;
      var losses = 0;
      var counter = 30;
      var clockRunning = false;
      var correctAnswer;
      var countdown;
      var announcement;

      $(document).ready(function() {
        // Insert Start button on page load
        var startButton = $('<button id="start">').text("Start Game")
        $('#start-button').html(startButton);

        function generateQuestion() {
          // Clear Previous Screen
          $('#announcement').text("");
          // Generate next question
          if (questionNum === 4) {
              console.log("Game Over!")
              gameOver();
            } else {
              //Reset Clock
              counter = 30
              countdown = setInterval(function () { 
              counter--
              // Push timer to DOM
              $('#time-left').text("Time Remaining: " + counter )
                if (counter === 0) {
                  $('#time-left').text("Time's Up!")
                  clearInterval(countdown);
                  console.log("Time's Up!");
                }
              }, 1000);
              console.log(counter)
              var i = questionNum
              $('#question').text(questionsArr[i].q);
              console.log("Question: " + questionsArr[i].q);
              correctAnswer = (questionsArr[i].answer);
              console.log("Correct Answer: " + correctAnswer)
              var choiceOne = $('<button id="options" value="1">').text(questionsArr[i].choices[0]);
              var choiceTwo = $('<button id="options" value="2">').text(questionsArr[i].choices[1]);
              var choiceThree = $('<button id="options" value="3">').text(questionsArr[i].choices[2]);
              var choiceFour = $('<button id="options" value="4">').text(questionsArr[i].choices[3]);
              $('#choices').append(choiceOne, choiceTwo, choiceThree, choiceFour);
            }
        }

        function populateAnswer() {
          // Clear Question Divs
          $('#time-left').text("");
          $('#question').text("");
          $('#choices').empty();
          // Send announcement to DOM
          $('#announcement').text(announcement);
          setInterval(generateQuestion(), 1000);
        }

        function gameOver() {
          // Clear Previous Screen
          $('#announcement').text("");
          // Send wins tally to DOM
          $('#wins').text("Correct Answers: " + wins);
          // Send losses tally to DOM
          $('#losses').text("Incorrect Answers: " + losses);
        }

        $('#start').on('click', function() {
          console.log("Start Clicked")
          // Hide start button
          $(this).hide();
          // Push Time Remaining to DOM
          $('#time-left').text("Time Remaining: " + counter )
          // Populate the questions with text on DOM
          generateQuestion();
        })

        $('body').on('click', "#options", function(event) {
            console.log("Answer Clicked")
            userChoice = parseInt($(this).val());
            console.log("Value of clicked button: " + userChoice)
              // If userChoice equals answer (win)
              if (userChoice === correctAnswer) {
                  // Add a win to the wins variable
                  wins++;
                  // Send announcement to DOM
                  announcement = 'You are correct!';
                  console.log("Wins: " + wins)
                  // Show the correct answer/explanation
                  populateAnswer();
                  // TODO: Timer until next question is shown
                  // go to next question
                  questionNum++

                  console.log("Question Number: " + questionNum)
                  generateQuestion();
              // If userChoice does not equal answer () (loss)
              } else if (userChoice !== correctAnswer) {
                  // Add a loss to the losses variable
                  losses++;
                  // Send announcement to DOM
                  announcement = 'You are incorrect!';
                  console.log("Losses: " + losses)
                  // Show the correct answer/explanation
                  populateAnswer();
                  // TODO: Timer until next question is shown
                  // go to next question
                  questionNum++
              }
              clearInterval(countdown);
            });  
          });

    </script>
</body>
</html>
